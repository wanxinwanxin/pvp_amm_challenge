{"abi":[{"type":"function","name":"afterInitialize","inputs":[{"name":"initialX","type":"uint256","internalType":"uint256"},{"name":"initialY","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"bidFee","type":"uint256","internalType":"uint256"},{"name":"askFee","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"afterSwap","inputs":[{"name":"trade","type":"tuple","internalType":"struct TradeInfo","components":[{"name":"isBuy","type":"bool","internalType":"bool"},{"name":"amountX","type":"uint256","internalType":"uint256"},{"name":"amountY","type":"uint256","internalType":"uint256"},{"name":"timestamp","type":"uint256","internalType":"uint256"},{"name":"reserveX","type":"uint256","internalType":"uint256"},{"name":"reserveY","type":"uint256","internalType":"uint256"}]}],"outputs":[{"name":"bidFee","type":"uint256","internalType":"uint256"},{"name":"askFee","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"getFeeStructure","inputs":[{"name":"trade","type":"tuple","internalType":"struct TradeInfo","components":[{"name":"isBuy","type":"bool","internalType":"bool"},{"name":"amountX","type":"uint256","internalType":"uint256"},{"name":"amountY","type":"uint256","internalType":"uint256"},{"name":"timestamp","type":"uint256","internalType":"uint256"},{"name":"reserveX","type":"uint256","internalType":"uint256"},{"name":"reserveY","type":"uint256","internalType":"uint256"}]}],"outputs":[{"name":"","type":"tuple","internalType":"struct FeeStructure","components":[{"name":"bidTiers","type":"tuple[3]","internalType":"struct FeeTier[3]","components":[{"name":"threshold","type":"uint256","internalType":"uint256"},{"name":"fee","type":"uint256","internalType":"uint256"}]},{"name":"askTiers","type":"tuple[3]","internalType":"struct FeeTier[3]","components":[{"name":"threshold","type":"uint256","internalType":"uint256"},{"name":"fee","type":"uint256","internalType":"uint256"}]},{"name":"bidTierCount","type":"uint8","internalType":"uint8"},{"name":"askTierCount","type":"uint8","internalType":"uint8"}]}],"stateMutability":"nonpayable"},{"type":"function","name":"getName","inputs":[],"outputs":[{"name":"","type":"string","internalType":"string"}],"stateMutability":"view"},{"type":"function","name":"supportsFeeStructure","inputs":[],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"afterInitialize(uint256,uint256)":"837aef47","afterSwap((bool,uint256,uint256,uint256,uint256,uint256))":"c2babb57","getFeeStructure((bool,uint256,uint256,uint256,uint256,uint256))":"cfa144e3","getName()":"17d7de7c","supportsFeeStructure()":"5c8ac34f"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"initialX\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"initialY\",\"type\":\"uint256\"}],\"name\":\"afterInitialize\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"bidFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"askFee\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"bool\",\"name\":\"isBuy\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"amountX\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"amountY\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"reserveX\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"reserveY\",\"type\":\"uint256\"}],\"internalType\":\"struct TradeInfo\",\"name\":\"trade\",\"type\":\"tuple\"}],\"name\":\"afterSwap\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"bidFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"askFee\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"bool\",\"name\":\"isBuy\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"amountX\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"amountY\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"reserveX\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"reserveY\",\"type\":\"uint256\"}],\"internalType\":\"struct TradeInfo\",\"name\":\"trade\",\"type\":\"tuple\"}],\"name\":\"getFeeStructure\",\"outputs\":[{\"components\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"threshold\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"}],\"internalType\":\"struct FeeTier[3]\",\"name\":\"bidTiers\",\"type\":\"tuple[3]\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"threshold\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"}],\"internalType\":\"struct FeeTier[3]\",\"name\":\"askTiers\",\"type\":\"tuple[3]\"},{\"internalType\":\"uint8\",\"name\":\"bidTierCount\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"askTierCount\",\"type\":\"uint8\"}],\"internalType\":\"struct FeeStructure\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getName\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"supportsFeeStructure\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Fees are returned as WAD values (1e18 = 100%, 1e15 = 0.1% = 10bps)\",\"kind\":\"dev\",\"methods\":{\"afterInitialize(uint256,uint256)\":{\"params\":{\"initialX\":\"Starting X reserve amount (WAD precision)\",\"initialY\":\"Starting Y reserve amount (WAD precision)\"},\"returns\":{\"askFee\":\"Fee when AMM sells X (WAD precision, e.g., 30e14 = 30bps)\",\"bidFee\":\"Fee when AMM buys X (WAD precision, e.g., 30e14 = 30bps)\"}},\"afterSwap((bool,uint256,uint256,uint256,uint256,uint256))\":{\"params\":{\"trade\":\"Information about the just-executed trade\"},\"returns\":{\"askFee\":\"Updated fee when AMM sells X (WAD precision)\",\"bidFee\":\"Updated fee when AMM buys X (WAD precision)\"}},\"getFeeStructure((bool,uint256,uint256,uint256,uint256,uint256))\":{\"details\":\"Only called if supportsFeeStructure() returns trueAllows strategies to specify size-dependent fees (e.g., 30bps for small trades, 10bps for large)Router will compute weighted average fees for near-optimal splitting\",\"params\":{\"trade\":\"Current trade information (may be used to adjust tiers dynamically)\"},\"returns\":{\"_0\":\"fee structure containing bid and ask tier arrays\"}},\"getName()\":{\"returns\":{\"_0\":\"Strategy name string\"}},\"supportsFeeStructure()\":{\"details\":\"Strategies implementing tier-based fees should return trueDefault implementation in AMMStrategyBase returns false for backward compatibility\",\"returns\":{\"_0\":\"True if the strategy implements getFeeStructure(), false otherwise\"}}},\"title\":\"AMM Strategy Interface\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"afterInitialize(uint256,uint256)\":{\"notice\":\"Initialize the strategy with starting reserves\"},\"afterSwap((bool,uint256,uint256,uint256,uint256,uint256))\":{\"notice\":\"Called after each trade to update fees\"},\"getFeeStructure((bool,uint256,uint256,uint256,uint256,uint256))\":{\"notice\":\"Get the complete fee structure with up to 3 tiers per direction\"},\"getName()\":{\"notice\":\"Get the strategy name for display\"},\"supportsFeeStructure()\":{\"notice\":\"Check if this strategy supports piecewise fee structures\"}},\"notice\":\"Interface that all AMM fee strategies must implement\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/IAMMStrategy.sol\":\"IAMMStrategy\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"src/IAMMStrategy.sol\":{\"keccak256\":\"0xe13eb28d65cd27e41ef9bcc9e7d8223656f882bdc815f3d5e8f36b041bff434d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9a55a8eb42d1b1e8d01769e0699dfdcbf12786226bc447686158b6360641b337\",\"dweb:/ipfs/QmRcy4sZdCbLsvZ7YhWCtyPFvWuEFDY2qbi4q3KHBBMGkV\"]},\"src/IFeeStructure.sol\":{\"keccak256\":\"0xb64f606e7a9c929ae942ee9a7b8136616f0afbcb13256509ba61ab595f4f9f8a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://49943a35e39aea6e2c4bb5d060dce5fa2d7b9b9f91447ac5cb62d52fd5800a5e\",\"dweb:/ipfs/QmXYewSQsEnj68d3zQAtAfxcZMsSnABXtdkJGzNZpqqtrX\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint256","name":"initialX","type":"uint256"},{"internalType":"uint256","name":"initialY","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"afterInitialize","outputs":[{"internalType":"uint256","name":"bidFee","type":"uint256"},{"internalType":"uint256","name":"askFee","type":"uint256"}]},{"inputs":[{"internalType":"struct TradeInfo","name":"trade","type":"tuple","components":[{"internalType":"bool","name":"isBuy","type":"bool"},{"internalType":"uint256","name":"amountX","type":"uint256"},{"internalType":"uint256","name":"amountY","type":"uint256"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"uint256","name":"reserveX","type":"uint256"},{"internalType":"uint256","name":"reserveY","type":"uint256"}]}],"stateMutability":"nonpayable","type":"function","name":"afterSwap","outputs":[{"internalType":"uint256","name":"bidFee","type":"uint256"},{"internalType":"uint256","name":"askFee","type":"uint256"}]},{"inputs":[{"internalType":"struct TradeInfo","name":"trade","type":"tuple","components":[{"internalType":"bool","name":"isBuy","type":"bool"},{"internalType":"uint256","name":"amountX","type":"uint256"},{"internalType":"uint256","name":"amountY","type":"uint256"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"uint256","name":"reserveX","type":"uint256"},{"internalType":"uint256","name":"reserveY","type":"uint256"}]}],"stateMutability":"nonpayable","type":"function","name":"getFeeStructure","outputs":[{"internalType":"struct FeeStructure","name":"","type":"tuple","components":[{"internalType":"struct FeeTier[3]","name":"bidTiers","type":"tuple[3]","components":[{"internalType":"uint256","name":"threshold","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"}]},{"internalType":"struct FeeTier[3]","name":"askTiers","type":"tuple[3]","components":[{"internalType":"uint256","name":"threshold","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"}]},{"internalType":"uint8","name":"bidTierCount","type":"uint8"},{"internalType":"uint8","name":"askTierCount","type":"uint8"}]}]},{"inputs":[],"stateMutability":"view","type":"function","name":"getName","outputs":[{"internalType":"string","name":"","type":"string"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"supportsFeeStructure","outputs":[{"internalType":"bool","name":"","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{"afterInitialize(uint256,uint256)":{"params":{"initialX":"Starting X reserve amount (WAD precision)","initialY":"Starting Y reserve amount (WAD precision)"},"returns":{"askFee":"Fee when AMM sells X (WAD precision, e.g., 30e14 = 30bps)","bidFee":"Fee when AMM buys X (WAD precision, e.g., 30e14 = 30bps)"}},"afterSwap((bool,uint256,uint256,uint256,uint256,uint256))":{"params":{"trade":"Information about the just-executed trade"},"returns":{"askFee":"Updated fee when AMM sells X (WAD precision)","bidFee":"Updated fee when AMM buys X (WAD precision)"}},"getFeeStructure((bool,uint256,uint256,uint256,uint256,uint256))":{"details":"Only called if supportsFeeStructure() returns trueAllows strategies to specify size-dependent fees (e.g., 30bps for small trades, 10bps for large)Router will compute weighted average fees for near-optimal splitting","params":{"trade":"Current trade information (may be used to adjust tiers dynamically)"},"returns":{"_0":"fee structure containing bid and ask tier arrays"}},"getName()":{"returns":{"_0":"Strategy name string"}},"supportsFeeStructure()":{"details":"Strategies implementing tier-based fees should return trueDefault implementation in AMMStrategyBase returns false for backward compatibility","returns":{"_0":"True if the strategy implements getFeeStructure(), false otherwise"}}},"version":1},"userdoc":{"kind":"user","methods":{"afterInitialize(uint256,uint256)":{"notice":"Initialize the strategy with starting reserves"},"afterSwap((bool,uint256,uint256,uint256,uint256,uint256))":{"notice":"Called after each trade to update fees"},"getFeeStructure((bool,uint256,uint256,uint256,uint256,uint256))":{"notice":"Get the complete fee structure with up to 3 tiers per direction"},"getName()":{"notice":"Get the strategy name for display"},"supportsFeeStructure()":{"notice":"Check if this strategy supports piecewise fee structures"}},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/IAMMStrategy.sol":"IAMMStrategy"},"evmVersion":"paris","libraries":{}},"sources":{"src/IAMMStrategy.sol":{"keccak256":"0xe13eb28d65cd27e41ef9bcc9e7d8223656f882bdc815f3d5e8f36b041bff434d","urls":["bzz-raw://9a55a8eb42d1b1e8d01769e0699dfdcbf12786226bc447686158b6360641b337","dweb:/ipfs/QmRcy4sZdCbLsvZ7YhWCtyPFvWuEFDY2qbi4q3KHBBMGkV"],"license":"MIT"},"src/IFeeStructure.sol":{"keccak256":"0xb64f606e7a9c929ae942ee9a7b8136616f0afbcb13256509ba61ab595f4f9f8a","urls":["bzz-raw://49943a35e39aea6e2c4bb5d060dce5fa2d7b9b9f91447ac5cb62d52fd5800a5e","dweb:/ipfs/QmXYewSQsEnj68d3zQAtAfxcZMsSnABXtdkJGzNZpqqtrX"],"license":"MIT"}},"version":1},"id":20}